const express = require('express');
const bodyParser = require('body-parser');
const app = express();

const students = [
  { id: '123', password: '123'},
  { id: '456', password: '456'}
];

app.set('view engine', 'ejs');
app.use(bodyParser.urlencoded({ extended: true }));

app.get('/login', (req, res) => {
  console.log("Welcome!")
  return res.status(200).render("login");
});

app.post('/login', (req, res) => {
  const studentId = req.body.studentId;
  const password = req.body.password;

  const student = students.find(s => s.id == studentId);

  if (student && student.password == password) {
    res.render('success');
    console.log('you are successful.');
    
 } else {
    res.render('failure');
    console.log('Error.');
    
  }
});

app.listen(process.env.PORT || 8899);  
