const createDocument = function(db, req) {
  const collection = db.collection('student');

  collection.insertOne({
    "StudentName": req.body.student_name,
    "StudentID": req.body.student_id,
    "StudentGrade": req.body.student_grade,
    "AverageMark": req.body.average_mark,
    "StudentGender": req.body.gender
  }, function(error, results) {
    if (error) {
      throw error;
    }
    console.log(results);
  });
};

const deleteDocument = function(db, req) {
  const collection = db.collection('student');

  collection.deleteOne({
    "StudentName": req.body.student_name,
    "StudentID": req.body.student_id,
    "StudentGrade": req.body.student_grade,
    "AverageMark": req.body.average_mark,
    "StudentGender": req.body.gender
  }, function(error, results) {
    if (error) {
      throw error;
    }
    console.log(results);
  });
};

app.post('/create', (req, res) => {
  const db = client.db(dbName);

  createDocument(db, req);
  res.redirect('/createSucc');
});

app.post('/delete', (req, res) => {
  const db = client.db(dbName);

  deleteDocument(db, req);
  res.redirect('/deleteSucc');
});
