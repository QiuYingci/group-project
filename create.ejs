const express = require('express');
const app = express();
const bodyParser = require('body-parser');

app.set('view engine', 'ejs');

app.use(bodyParser.urlencoded({ extended: false }));

const students = [
  { id: '123', password: '123', name: 'Ann'},
  { id: '456', password: '456', name: 'Znn'}
];

app.get('/login', (req, res) => {
  res.render('login');
});

app.post('/login', (req, res) => {
  const studentId = req.body.studentId;
  const password = req.body.password;

const student = students.find(s => s.id == studentId);

  if (student && student.password == password) {
    res.render('success', { student: student });
    console.log('you are successful.');
 } else {
    res.render('failure');
    console.log('you are fail.');
  }
});

app.listen(8899, () => {
  console.log("server started, listening on port  8899" );
});
